{"modules":[{"id":"562c6437-c4b8-4d2b-9062-e5588307abe8","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"e30abf56-7636-42fc-acf7-3615fa804e1f"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":47,"y":141}}},{"id":"e30abf56-7636-42fc-acf7-3615fa804e1f","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"cab32b32-7d2c-4f73-aa8c-1ff53fd8af76"},{"condition":"Error","transition":"ca1a721a-9f20-4187-b251-880815c3ca4b"}],"parameters":[{"name":"FunctionArn","value":"GetHotMessageLambda","namespace":null},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":48.31307601928711,"y":300.1597900390625},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"f3ade9a1-6fd2-41f4-a0ac-6e7ba02f4ed0","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1512,"y":677}}},{"id":"9991fd83-6b19-42cb-8506-8fab3b229fdc","type":"PlayPrompt","branches":[{"condition":"Success","transition":"834e94a5-441a-40e5-9206-a901091c70ff"}],"parameters":[{"name":"Text","value":"Hello.  Welcome back.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":792,"y":15},"useDynamic":false}},{"id":"cd06b277-e881-4942-a14f-39ed6538de6d","type":"PlayPrompt","branches":[{"condition":"Success","transition":"834e94a5-441a-40e5-9206-a901091c70ff"}],"parameters":[{"name":"Text","value":"Hello.  Thank you for calling.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":593,"y":282},"useDynamic":false}},{"id":"36b9d11d-0456-46cd-8885-415af43101bd","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c879b80a-cb91-4f6f-a96a-3563e4cd9109"}],"parameters":[{"name":"Text","value":"Thank you for contacting us.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":594.5630493164062,"y":446.20977783203125},"useDynamic":false}},{"id":"c879b80a-cb91-4f6f-a96a-3563e4cd9109","type":"Transfer","branches":[{"condition":"Error","transition":"ca1a721a-9f20-4187-b251-880815c3ca4b"}],"parameters":[{"name":"ContactFlowId","value":"","resourceName":"TransferToQueue"}],"metadata":{"position":{"x":825.817626953125,"y":471.4183044433594},"useDynamic":false,"ContactFlow":{"id":"","text":"TransferToQueue","arn":null,"metricDetail":null,"resourceId":null}},"target":"Flow"},{"id":"6e6aec3b-f3bc-4c47-8c07-9bd88046d053","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"return_caller","transition":"9991fd83-6b19-42cb-8506-8fab3b229fdc"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"new_caller","transition":"cd06b277-e881-4942-a14f-39ed6538de6d"},{"condition":"NoMatch","transition":"cd06b277-e881-4942-a14f-39ed6538de6d"}],"parameters":[{"name":"Attribute","value":"ContactStatus"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":569,"y":17},"conditionMetadata":[{"id":"b7087380-cdcf-4002-9ec4-5ec51c47ca12","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"return_caller"},{"id":"2473e208-5a4b-4bef-8dba-863b7b1297d7","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"new_caller"}]}},{"id":"b7a7f06d-34da-442f-bf87-992d28a2a511","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"6e6aec3b-f3bc-4c47-8c07-9bd88046d053"},{"condition":"Error","transition":"ca1a721a-9f20-4187-b251-880815c3ca4b"}],"parameters":[{"name":"FunctionArn","value":"ContactLookupLambda","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"CustomerNumber","value":"Customer Number","namespace":"System"}],"metadata":{"position":{"x":328,"y":409},"dynamicMetadata":{"CustomerNumber":true},"useDynamic":false},"target":"Lambda"},{"id":"90e1177c-0b75-4bd2-b86a-5c7cb2b7ede9","type":"Transfer","branches":[{"condition":"Error","transition":"ca1a721a-9f20-4187-b251-880815c3ca4b"}],"parameters":[{"name":"ContactFlowId","value":"","resourceName":"InboundLexRouter"}],"metadata":{"position":{"x":1570,"y":309},"useDynamic":false,"ContactFlow":{"id":"","text":"InboundLexRouter"}},"target":"Flow"},{"id":"834e94a5-441a-40e5-9206-a901091c70ff","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"YesNo","transition":"1e376600-9cc0-4728-a766-1c6d3eedf0e6"},{"condition":"NoMatch","transition":"77a61bf9-f0e0-4543-9601-a64e1cbd6e3c"},{"condition":"Error","transition":"ca1a721a-9f20-4187-b251-880815c3ca4b"}],"parameters":[{"name":"Text","value":"Can we call you back later to answer a satisfaction survey?","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"ConnectBot"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":""}],"metadata":{"position":{"x":819,"y":203},"conditionMetadata":[{"id":"f1322efb-f741-4029-9255-85ce131958b1","value":"YesNo"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"77a61bf9-f0e0-4543-9601-a64e1cbd6e3c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"90e1177c-0b75-4bd2-b86a-5c7cb2b7ede9"}],"parameters":[{"name":"Text","value":"Okay. Taking you to the main menu.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1319,"y":236},"useDynamic":false}},{"id":"0aa7c083-9949-4cd9-9dcb-7371a64f07c0","type":"CheckAttribute","branches":[{"condition":"NoMatch","transition":"b7a7f06d-34da-442f-bf87-992d28a2a511"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"CHAT","transition":"36b9d11d-0456-46cd-8885-415af43101bd"}],"parameters":[{"name":"Attribute","value":"Channel"},{"name":"Namespace","value":"System"}],"metadata":{"position":{"x":316,"y":196},"conditionMetadata":[{"id":"20056fa4-d2c5-4750-ac5c-299fb7923029","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"CHAT"}]}},{"id":"cab32b32-7d2c-4f73-aa8c-1ff53fd8af76","type":"CheckAttribute","branches":[{"condition":"NoMatch","transition":"0aa7c083-9949-4cd9-9dcb-7371a64f07c0"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"True","transition":"d9a3758a-4ac2-4c67-a6f3-7b28890861e7"}],"parameters":[{"name":"Attribute","value":"ActiveMessage"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":58,"y":508},"conditionMetadata":[{"id":"f76252f8-3307-4f9b-bdae-2e8bad6a72a0","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"True"}]}},{"id":"d9a3758a-4ac2-4c67-a6f3-7b28890861e7","type":"PlayPrompt","branches":[{"condition":"Success","transition":"0aa7c083-9949-4cd9-9dcb-7371a64f07c0"}],"parameters":[{"name":"Text","value":"Message","namespace":"External"},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":292,"y":29},"useDynamic":true}},{"id":"21f703da-f87a-475c-9feb-874cd3736829","type":"PlayPrompt","branches":[{"condition":"Success","transition":"90e1177c-0b75-4bd2-b86a-5c7cb2b7ede9"}],"parameters":[{"name":"Text","value":"Thank you.  You'll receive a call later.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1563,"y":105},"useDynamic":false}},{"id":"ca1a721a-9f20-4187-b251-880815c3ca4b","type":"PlayPrompt","branches":[{"condition":"Success","transition":"f3ade9a1-6fd2-41f4-a0ac-6e7ba02f4ed0"}],"parameters":[{"name":"Text","value":"Something went wrong","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1045,"y":649},"useDynamic":false}},{"id":"1e376600-9cc0-4728-a766-1c6d3eedf0e6","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"15d01ef0-64ab-42fc-8b4e-857095bc2bec"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"77a61bf9-f0e0-4543-9601-a64e1cbd6e3c"},{"condition":"NoMatch","transition":"77a61bf9-f0e0-4543-9601-a64e1cbd6e3c"}],"parameters":[{"name":"Attribute","value":"Response"},{"name":"Namespace","value":"Lex.Slots"}],"metadata":{"position":{"x":1050,"y":28},"conditionMetadata":[{"id":"f2a6d799-5efa-4a3f-9979-50e97287bd7e","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Yes"},{"id":"4e34e939-508e-4fdc-893d-9f10d0b0cbf5","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"No"}]}},{"id":"15d01ef0-64ab-42fc-8b4e-857095bc2bec","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"21f703da-f87a-475c-9feb-874cd3736829"},{"condition":"Error","transition":"ca1a721a-9f20-4187-b251-880815c3ca4b"}],"parameters":[{"name":"FunctionArn","value":"PutContactinQueueLambda","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"CustomerNumber","value":"Customer Number","namespace":"System"},{"name":"Parameter","key":"OutboundContactFlowId","value":"68ac016a-4159-4606-8edb-3c1ffa3ead6e","namespace":null}],"metadata":{"position":{"x":1321,"y":38},"dynamicMetadata":{"CustomerNumber":true,"OutboundContactFlowId":false},"useDynamic":false},"target":"Lambda"}],"version":"1","type":"contactFlow","start":"562c6437-c4b8-4d2b-9062-e5588307abe8","metadata":{"entryPointPosition":{"x":17,"y":7},"snapToGrid":false,"name":"EntryPoint","description":null,"type":"contactFlow","status":"published","hash":"77d0c0ebe8cd7cbb2fc5f83409b3de154011c861b6ed15417ba050dc180da227"}}